services:
  - type: web
    name: genai-backend
    env: docker
    dockerfilePath: ./backend/Dockerfile
    autoDeploy: true
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: genai-db
          property: connectionString
      - key: FRONTEND_URL
        value: https://${RENDER_EXTERNAL_HOSTNAME}
      - key: CHROMA_PERSIST_DIR
        value: /app/chroma_data
      - key: UPLOAD_DIR
        value: /app/uploads

  - type: web
    name: genai-frontend
    env: docker
    dockerfilePath: ./frontend/Dockerfile
    autoDeploy: true

  - type: pserv
    name: genai-db
    env: docker
    plan: free
    ipWhitelist: []
